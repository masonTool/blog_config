---
title: 数据库基本概念
date: 2017-08-15 10:08:44
categories:
- 基础复习
tags:
- database
---

## 数据库基础

### 术语

* 数据库（DB）：长期存储在计算机内、有组织的、统一管理的相关数据的集合。
* 数据库管理系统（DBMS）：位于用户和操作系统之间的一层数据管理软件。
* 数据库系统（DBS）：实现有组织地、动态地存储大量关联数据、方便多用户访问的计算机硬件、软件和数据资源组成的系统

### 分类

* 关系数据库.
* 分布式数据库. 通常使用位于不同的地点的较小的计算机系统，通过网络连接构成完整的、全局的大型数据库。每台计算机有DBMS的一份完整拷贝，且具有自己局部的数据库。
* 对象数据库. 是用以对象形式表示信息的数据库。对象数据库的管理系统称为ODBMS或OODBMS。
* 网络数据库. 由数据和资源共享这两种方式结合在一起而成，也称Web数据库。它以后台（远程）数据库为基础，加上一定的前台（本地计算机）程序，通过浏览器完成数据的存储、查询等操作

### 体系结构

* 概念模式. 简称为模式，它表示了对数据的全局逻辑级的抽象级别，是数据库中全部数据的整体逻辑结构的描述。它由若干个概念记录类型组成，还包含记录间联系、数据的完整性、安全性等要求。在实现中，它可以对应于所有的表格。
* 内模式. 也称存储模式，表示了对数据的物理级的抽象级别。它是数据库中全体数据的内部表示或底层描述，是数据库最低一级的逻辑描述，它描述了数据在存储介质上的存储方式和物理结构，对应着实际存储在外存储介质上的数据库。它包括记录类型、索引、文件的组织等，用内模式描述语言来描述、定义。
* 外模式也称子模式，表示了对数据的局部逻辑级的抽象级别。它对应于用户级，是用户与数据库系统的接口，是用户用到的那部分数据的描述。在实现中可以对应于视图。

## 数据模型

### 概念数据模型-ER模型

* 实体：客观存在，可以互相区别的事物。
* 属性：实体的特性
* 联系：实体之间的相互联系

### 逻辑数据模型

* 层次模型：用树形结构表示实体类型及实体间联系的数据模型，盛行于20世纪70年代。缺点是只能表示1:N的关系，且查询和操作很复杂。
* 网状模型：用有向图表示实体类型及实体间联系的数据模型，盛行于70年代至80年代中期。它的特点是记录之间联系通过指针实现，M:N也容易实现，查询效率较高。缺点是数据结构复杂，编程复杂。
* 关系模型：用二维表格表示实体集；用关键码而不是用指针导航数据。SQL语言是具有代表性的语言

### 物理数据模型

##  关系数据库

### 完整性规则

* 实体完整性规则，即主键的值不能是空值；
* 参照完整性规则，即不允许（通过外键）引用不存在的实体；
* 用户定义的完整性规则，比如属性“性别”只能接受“男”和“女”作为合法值，其它的输入都是非法的

### 运算

* 五个基本操作：并（Union，∪）、差（set difference，−）、笛卡儿积（Cartesian product，×）、投影（Projection，Π）和选择（Selection，σ）；
* 四个组合操作：交（Intersection，∩）、θ连接（θ-Join，θ）、自然连接（Natural join，⋈）和除法（Division，÷）；
* 七个扩充操作：改名（Rename，ρ）、广义投影、赋值（←）、外连接（Outer joins，⟕⟖⟗）、外部并、半连接（Semijoin，⋉ ⋊）、聚集操作（Aggregation）。

## 规范化理论

* 一范式. 无重复的列
* 二范式. 属性完全依赖于主键
* 三范式. 属性不依赖于其它非主属性
* 四范式. 禁止主键列和非主键列一对多关系不受约束

## 事务

事务的基本属性

* 原子性（Atomicity）：一个事务对数据库的所有操作，是一个不可分割的工作单元。这些操作要么全部执行，要么什么也不做。
* 一致性（Consistency）：一个事务独立执行的结果，应保持数据库的一致性，即数据不会因事务的执行而遭到破坏。
* 隔离性（Isolation）：在多个事务并发执行时，系统应保证与这些事务先后独立执行的结果一样。
* 持久性（Durability）：一个事务一旦完成全部操作后，他对数据库的所有更新应永久地反映在数据库中

这些属性的首字母缩写为ACID。其中原子性是最主要的根本目标；其它三个是辅助的属性。

## 索引机制

索引用来提高数据查找的效率，用户看不到索引的存在。注意：使用索引会使更新表的速度变慢，因为数据更新的同时还要更新索引。

### 优点

第一，通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。
第二，可以大大加快数据的检索速度，这也是创建索引的最主要的原因。
第三，可以加速表和表之间的连接，特别是在实现数据的参考完整性方面特别有意义。
第四，在使用分组和排序子句进行数据检索时，同样可以显著减少查询中分组和排序的时间。
第五，通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能

### 缺点
第一，创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增加。
第二，索引需要占物理空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，如果要建立聚簇索引，那么需要的空间就会更大。
第三，当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，这样就降低了数据的维护速度

### 什么情况下用
* 经常搜索
* 主键， 外键 
* 需要排序或限定范围的列

### 什么情况下不用
* 查询少， 
* 数据少
* 数据量大的列(text, img, bit)
* 修改性能>>检索性能

### 分类
* 唯一索引。 限定列不重复
* 主键索引。 主键会自动创建
* 聚集索引。 一个表只能有一个。 物理顺序与逻辑顺序相同。

### 数据结构
* B树
* B+树
* 红黑树（索引不用）

## 视图机制

视图是一种虚拟的表，具有和物理表相同的功能。可以对视图进行增，改，查，操作，试图通常是有一个表或者多个表的行或列的子集。对视图的修改不影响基本表。它使得我们获取数据更容易

用来对无权用户屏蔽数据。数据安全，逻辑数据独立性和操作简便性。

http://blog.csdn.net/kennyrose/article/details/7532032/
http://www.cnblogs.com/anding/p/3254674.html
http://blog.csdn.net/u011404663/article/details/45252899
http://blog.csdn.net/hectorhua/article/details/13767361/